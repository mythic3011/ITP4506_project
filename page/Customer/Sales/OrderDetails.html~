<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="../../../resources/css/main.css">
    <script src="../../../resources/js/Sales/CustomerDashboard.js"></script>
    <script src="../../../resources/js/Sales/CustomerNavigation.js"></script>
    <script src="../../../resources/js/Sales/Wishlist.js"></script>
    <script src="../../../resources/js/Sales/Checkout.js"></script>
    <script src="../../../resources/js/script.js"></script>
    <title>Order Details | Legend Motor Company</title>
</head>
<body class="bg-gray-50 font-sans">
<header class="navbar bg-white shadow-md sticky top-0 z-10">
</header>
<div id="notification-container" class="fixed top-4 right-4 z-50"></div>
<main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8" id="Checkout">
    <div id="orderDetailsContainer" class="container mb-4 flex flex-col sm:flex-row gap-6 py-6 px-6">
        <h1 class="text-4xl font-bold mb-6 text-gray-800">Order Details</h1>
        <div class="mb-4 flex flex-col sm:flex-row gap-6">
            <!-- Order Summary -->
            <div id="orderSummaryContainer" class="mb-6 p-4 bg-white shadow rounded-md">
                <h2 class="text-xl font-semibold mb-4">Order Summary</h2>

                <div id="loadingSpinner" class="flex justify-center items-center">
                    <div class="loader ease-linear rounded-full border-8 border-t-8 border-gray-200 h-16 w-16"></div>
                </div>

                <table class="min-w-full divide-y divide-gray-200 hidden" id="orderTable">
                    <tbody id="orderSummary"></tbody>
                </table>

                <div id="errorMessage" class="hidden bg-red-500 text-white p-2 rounded mt-2"></div>

                <!-- Summary Totals -->
                <div id="summaryTotals" class="mt-4 hidden border-t border-gray-300 pt-4">
                    <p class="text-lg font-semibold" id="subtotalAmount">Subtotal: $XX.XX</p>
                    <p class="text-lg font-semibold" id="totalAmount">Total: $XX.XX</p>
                    <p class="text-lg font-semibold" id="DepositAmount">Deposit: $XX.XX</p>
                    <p class="text-lg font-semibold" id="EstimatedDelivery">Estimated Delivery: XX/XX/XXXX</p>
                </div>

                <!-- Financing Options Section -->
                <div id="financingOptions" class="mt-10 border-t border-gray-200 hidden">
                    <label class="block text-sm font-medium text-gray-700">Select Financing Option:</label>
                    <select id="financingMethod" class="mt-1 block w-full border-gray-300 rounded-md">
                        <option value="creditCard">Credit Card</option>
                        <option value="paypal">PayPal</option>
                        <option value="bankTransfer">Bank Transfer</option>
                    </select>
                </div>

                <!-- Trade-In Information Section -->
                <div id="tradeInInfo" class="mt-10 border-t border-gray-200 hidden">
                    <h3 class="text-lg font-semibold mb-2">Trade-In Information</h3>
                    <label for="tradeInItem" class="block text-sm font-medium text-gray-700">Item Description:</label>
                    <input type="text" id="tradeInItem" placeholder="e.g., iPhone 12"
                           class="mt-1 block w-full border-gray-300 rounded-md p-2"/>

                    <label for="tradeInValue" class="block text-sm font-medium text-gray-700 mt-4">Estimated Trade-In
                        Value:</label>
                    <input type="number" id="tradeInValue" placeholder="$0.00"
                           class="mt-1 block w-full border-gray-300 rounded-md p-2"/>

                    <button id="calculateTradeInValue"
                            class="mt-4 bg-blue-600 hover:bg-blue-500 text-white rounded-md px-4 py-2">
                        Calculate Trade-In Value
                    </button>

                    <!-- Display calculated trade-in value -->
                    <div id="calculatedTradeInValue" class="mt-4 hidden text-green-600"></div>
                </div>

                <!-- User Information -->
                <div class="mt-10 border-t border-gray-200">
                    <button id="toggleUserInfo" class="text-sm text-blue-500">Show User Information</button>
                    <div id="userInfoDetails" class="hidden mt-4">

                    </div>
                </div>

                <!-- Back Button -->
                <div class="mt-4">
                    <a href="javascript:history.back()"
                       class="block text-center bg-blue-600 hover:bg-blue-500 text-white rounded-md px-4 py-2 mt-6">
                        Back to Orders
                    </a>
                </div>
            </div>
        </div>
    </div>
</main>

<footer class="border-t border-gray-200">
    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-wrap items-center justify-between md:flex-no-wrap">
            <div class="flex items-center mb-6 md:mb-0">
                <span class="text-sm text-gray-500 ">Copyright &copy; 2024 Legend Motor Company</span>
            </div>
            <div class="flex items-center justify-between space-x-6 md:space-x-12 ms:hidden">
                <div class="flex items-center justify-between space-x-6">
                    <div class="flex items-center">
                        <a class="text-gray-600 " href="#">About Us</a>
                        <span class="bg-gray-200   rounded-full mx-3 h-5 w-5 opacity-20 group-hover:opacity-0"></span>
                        <a class="text-gray-600 " href="#">Contact Us</a>
                        <span class="bg-gray-200   rounded-full mx-3 h-5 w-5 opacity-20 group-hover:opacity-0"></span>
                        <a class="text-gray-600 " href="#">Order Tracking</a>
                        <span class="bg-gray-200   rounded-full mx-3 h-5 w-5 opacity-20 group-hover:opacity-0"></span>
                        <a class="text-gray-600 " href="#">Returns</a>
                        <span class="bg-gray-200   rounded-full mx-3 h-5 w-5 opacity-20 group-hover:opacity-0"></span>
                        <a class="text-gray-600 " href="#">FAQ</a>
                    </div>
                    <div class="flex items-center">
                        <a class="text-gray-600 " href="#">Terms of Service</a>
                        <span class="bg-gray-200   rounded-full mx-3 h-5 w-5 opacity-20 group-hover:opacity-0"></span>
                        <a class="text-gray-600 " href="#">Privacy Policy</a>
                        <span class="bg-gray-200   rounded-full mx-3 h-5 w-5 opacity-20 group-hover:opacity-0"></span>
                        <a class="text-gray-600 " href="#">Site Map</a>
                        <span class="bg-gray-200   rounded-full mx-3 h-5 w-5 opacity-20 group-hover:opacity-0"></span>
                        <a class="text-gray-600 " href="#">Contact Us</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
</body>
<script src="../../../resources/js/Sales/CustomerDashboard.js"></script>
<script src="../../../resources/js/Sales/CustomerNavigation.js"></script>
<script src="../../../resources/js/Sales/Wishlist.js"></script>
<script src="../../../resources/js/Sales/Checkout.js"></script>
<script>

    $(document).ready(function () {
        // Show loading spinner
        $('#loadingSpinner').show();

        // Simulate fetching order details
        setTimeout(() => {
            try {
                const order = JSON.parse(localStorage.getItem('lml_orders'));
                if (order) {
                    // Hide loading spinner
                    $('#loadingSpinner').hide();

                    // Show order details
                    $('#orderTable').removeClass('hidden');
                    $('#summaryTotals').removeClass('hidden');
                    $('#financingOptions').removeClass('hidden');
                    $('#userName').removeClass('hidden');
                    $('#userEmail').removeClass('hidden');
                    $('#userPhone').removeClass('hidden');
                    $('#userAddress').removeClass('hidden');

                    // Populate order details
                    $('#fullName').text(order.customer.name);
                    $('#email').text(order.customer.email);
                    $('#phone').text(order.customer.phone);
                    $('#address').text(order.customer.address);
                    $('#financingMethod-Selected').text(order.payment.method);
                    // Add more details as needed
                } else {
                    throw new Error('Order not found');
                }
            } catch (error) {
                // Hide loading spinner
                $('#loadingSpinner').hide();

                // Show error message
                $('#errorMessage').text('Failed to load order details. Please try again later.').removeClass('hidden');
            }
        }, 2000); // Simulate a delay for fetching data
    });
    // render Financing Option:, Name. Email, Phone, Address via local storage
    const user = localStorage.getItem('username');
    const UserInfo = JSON.parse(localStorage.getItem('orders_user'));
    const order = JSON.parse(localStorage.getItem('lml_orders'));
    if (user) {
        $('#fullName').text(user);
        $('#email').text(order.customer.email);
        $('#phone').text(order.customer.phone);
        $('#address').text(order.customer.address);
    }
    if (UserInfo) {
        $('#email').text(order.customer.email);
        $('#phone').text(order.customer.phone);
        $('#address').text(order.customer.address);
    }
    if (order) {
        $('#financingMethod-Selected').text(order.payment.method);
    }
</script>


